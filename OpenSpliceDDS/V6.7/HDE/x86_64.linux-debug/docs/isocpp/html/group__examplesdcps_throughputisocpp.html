<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>OpenSplice ISO C++ DCPS: The ISO C++ DCPS API Throughput example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenSplice ISO C++ DCPS
   &#160;<span id="projectnumber">6.4.140320</span>
   </div>
   <div id="projectbrief">ISO C++ OpenSplice Data Distribution Service Data-Centric Publish-Subscribe API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__examplesdcps_throughputisocpp.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#dirs">Directories</a> &#124;
<a href="#files">Files</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">The ISO C++ DCPS API Throughput example<div class="ingroups"><a class="el" href="group__examplesdcpsisocpp.html">ISO/IEC C++ DCPS PSM Examples</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="dirs"></a>
Directories</h2></td></tr>
<tr class="memitem:dir_5148d26459d9f6c7ebc7848685fb62c7"><td class="memItemLeft" align="right" valign="top">directory&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_5148d26459d9f6c7ebc7848685fb62c7.html">isocpp</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:_throughput_2isocpp_2implementation_8cpp"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_throughput_2isocpp_2implementation_8cpp.html">implementation.cpp</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:_throughput_2isocpp_2publisher_8cpp"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_throughput_2isocpp_2publisher_8cpp.html">publisher.cpp</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:_throughput_2isocpp_2subscriber_8cpp"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_throughput_2isocpp_2subscriber_8cpp.html">subscriber.cpp</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceexamples_1_1dcps_1_1_throughput_1_1isocpp"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceexamples_1_1dcps_1_1_throughput_1_1isocpp.html">examples::dcps::Throughput::isocpp</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga52eec8bf114dc7fdaa47fbfec5afec79"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__examplesdcps_throughputisocpp.html#ga52eec8bf114dc7fdaa47fbfec5afec79">BYTES_PER_SEC_TO_MEGABITS_PER_SEC</a>&#160;&#160;&#160;125000</td></tr>
<tr class="separator:ga52eec8bf114dc7fdaa47fbfec5afec79"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga7ee31d1b3243c6d0370629f66ed1ed00"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__examplesdcps_throughputisocpp.html#ga7ee31d1b3243c6d0370629f66ed1ed00">examples::dcps::Throughput::isocpp::CtrlHandler</a> (int fdwCtrlType)</td></tr>
<tr class="separator:ga7ee31d1b3243c6d0370629f66ed1ed00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa772676d9f66e59e251120146fca0940"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__examplesdcps_throughputisocpp.html#gaa772676d9f66e59e251120146fca0940">examples::dcps::Throughput::isocpp::publisher</a> (int argc, char *argv[])</td></tr>
<tr class="separator:gaa772676d9f66e59e251120146fca0940"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga29d2da617deae8d06aabfd2673c281b2"><td class="memItemLeft" align="right" valign="top">unsigned long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__examplesdcps_throughputisocpp.html#ga29d2da617deae8d06aabfd2673c281b2">examples::dcps::Throughput::isocpp::samplesReceived</a> (std::map&lt; <a class="el" href="namespacedds_1_1core.html#a8ee18acd2002fb15f2650f5c7cb055d0">dds::core::InstanceHandle</a>, unsigned long long &gt; &amp;count1, std::map&lt; <a class="el" href="namespacedds_1_1core.html#a8ee18acd2002fb15f2650f5c7cb055d0">dds::core::InstanceHandle</a>, unsigned long long &gt; &amp;count2, bool prevCount=false)</td></tr>
<tr class="separator:ga29d2da617deae8d06aabfd2673c281b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae47768815f5d4dd6122e37dfc95f76b6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__examplesdcps_throughputisocpp.html#gae47768815f5d4dd6122e37dfc95f76b6">examples::dcps::Throughput::isocpp::subscriber</a> (int argc, char *argv[])</td></tr>
<tr class="separator:gae47768815f5d4dd6122e37dfc95f76b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga1a5fa53114aa925a76eee0fc57b9931b"><td class="memItemLeft" align="right" valign="top">struct sigaction&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__examplesdcps_throughputisocpp.html#ga1a5fa53114aa925a76eee0fc57b9931b">examples::dcps::Throughput::isocpp::oldAction</a></td></tr>
<tr class="separator:ga1a5fa53114aa925a76eee0fc57b9931b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The <a class="el" href="namespaceexamples_1_1dcps_1_1_throughput.html">Throughput</a> example measures data throughput in bytes per second. The publisher allows you to specify a payload size in bytes as well as allowing you to specify whether to send data in bursts. The publisher will continue to send data forever unless a time out is specified. The subscriber will receive data and output the total amount received and the data rate in bytes per second. It will also indicate if any samples were received out of order. A maximum number of cycles can be specified and once this has been reached the subscriber will terminate and output totals and averages. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga52eec8bf114dc7fdaa47fbfec5afec79"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BYTES_PER_SEC_TO_MEGABITS_PER_SEC&#160;&#160;&#160;125000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_throughput_2isocpp_2implementation_8cpp_source.html#l00066">66</a> of file <a class="el" href="_throughput_2isocpp_2implementation_8cpp_source.html">implementation.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga7ee31d1b3243c6d0370629f66ed1ed00"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void examples::dcps::Throughput::isocpp::CtrlHandler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fdwCtrlType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_throughput_2isocpp_2implementation_8cpp_source.html#l00060">60</a> of file <a class="el" href="_throughput_2isocpp_2implementation_8cpp_source.html">implementation.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="gaa772676d9f66e59e251120146fca0940"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int examples::dcps::Throughput::isocpp::publisher </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function performs the publisher role in this example. </p>
<dl class="section return"><dt>Returns</dt><dd>0 if a sample is successfully written, 1 otherwise. </dd></dl>
<p>Get the program parameters Parameters: publisher [payloadSize] [burstInterval] [burstSize] [timeOut] [partitionName]</p>
<p>Initialise entities</p>
<p>Fill the sample payload with data</p>
<p>Register the sample instance and write samples repeatedly or until time out</p>
<p>Write data until burst size has been reached</p>
<p>Sleep until burst interval has passed </p>

<p>Definition at line <a class="el" href="_throughput_2isocpp_2implementation_8cpp_source.html#l00072">72</a> of file <a class="el" href="_throughput_2isocpp_2implementation_8cpp_source.html">implementation.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ga29d2da617deae8d06aabfd2673c281b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long long examples::dcps::Throughput::isocpp::samplesReceived </td>
          <td>(</td>
          <td class="paramtype">std::map&lt; <a class="el" href="namespacedds_1_1core.html#a8ee18acd2002fb15f2650f5c7cb055d0">dds::core::InstanceHandle</a>, unsigned long long &gt; &amp;&#160;</td>
          <td class="paramname"><em>count1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="namespacedds_1_1core.html#a8ee18acd2002fb15f2650f5c7cb055d0">dds::core::InstanceHandle</a>, unsigned long long &gt; &amp;&#160;</td>
          <td class="paramname"><em>count2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>prevCount</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function calculates the number of samples received</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">count</td><td>the map tracking sample count values </td></tr>
    <tr><td class="paramname">startCount</td><td>the map tracking sample count start or previous values </td></tr>
    <tr><td class="paramname">prevCount</td><td>if set to true, count2's value should be set to count1 after adding to total </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of samples received </dd></dl>

<p>Definition at line <a class="el" href="_throughput_2isocpp_2implementation_8cpp_source.html#l00221">221</a> of file <a class="el" href="_throughput_2isocpp_2implementation_8cpp_source.html">implementation.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="gae47768815f5d4dd6122e37dfc95f76b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int examples::dcps::Throughput::isocpp::subscriber </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function performs the subscriber role in this example. </p>
<dl class="section return"><dt>Returns</dt><dd>0 if a sample is successfully read, 1 otherwise. </dd></dl>
<p>Get the program parameters Parameters: publisher [maxCycles] [pollingDelay] [partitionName]</p>
<p>Initialise entities</p>
<p>Loop through until the maxCycles has been reached (0 = infinite)</p>
<p>If polling delay is set</p>
<p>Sleep before polling again</p>
<p>Wait for samples</p>
<p>Take samples and iterate through them</p>
<p>Check that the sample is the next one expected</p>
<p>Add the sample payload size to the total received</p>
<p>Check that at least one second has passed since the last output</p>
<p>If not the first iteration</p>
<p>Calculate the samples and bytes received and the time passed since the last iteration and output</p>
<p>Set the start time if it is the first iteration</p>
<p>Update the previous values for next iteration</p>
<p>Output totals and averages </p>

<p>Definition at line <a class="el" href="_throughput_2isocpp_2implementation_8cpp_source.html#l00240">240</a> of file <a class="el" href="_throughput_2isocpp_2implementation_8cpp_source.html">implementation.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga1a5fa53114aa925a76eee0fc57b9931b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct sigaction examples::dcps::Throughput::isocpp::oldAction</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_throughput_2isocpp_2implementation_8cpp_source.html#l00047">47</a> of file <a class="el" href="_throughput_2isocpp_2implementation_8cpp_source.html">implementation.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
